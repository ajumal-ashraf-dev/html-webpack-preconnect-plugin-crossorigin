# Embed link-rel-preconnect into HtmlWebpackPlugin pages

This extension plugin embeds `<link rel="preconnect">` tags into HTML files generated by the [HtmlWebpackPlugin](https://github.com/jantimon/html-webpack-plugin)

## Introduction

The `preconnect` can be pre-connected api server without having to wait for javascript loading and execute request, save a little time for users.

### Document

> The `preconnect` link relation type is used to indicate an origin that will be used to fetch required resources. Initiating an early connection, which includes the DNS lookup, TCP handshake, and optional TLS negotiation, allows the user agent to mask the high latency costs of establishing a connection.

[https://www.w3.org/TR/resource-hints/#preconnect](https://www.w3.org/TR/resource-hints/#preconnect)

### Browser compatibility

Chrome, Firefox, Android have been supported, IE/Edge/Safari not yet supported.

[https://caniuse.com/#feat=link-rel-preconnect](https://caniuse.com/#feat=link-rel-preconnect)

## Install

```bash
npm install html-webpack-preconnect-plugin --save-dev
```

## Usage

Add the plugin to your webpack config:

```javascript
var HtmlWebpackPreconnectPlugin = require('html-webpack-preconnect-plugin');

// webpack config
{
  ...
  plugins: [
    new HtmlWebpackPlugin({
      filename: 'index.html',

      // set the preconnect origins
      preconnect: [
        'http://api1.example.com',
        'http://api2.example.com',
      ]
    }),

    // another HTML entry
    new HtmlWebpackPlugin({
      filename: 'index2.html',
      preconnect: [
        'http://api2.example.com',
      ]
    }),

    // enabled preconnect plugin
    new HtmlWebpackPreconnectPlugin(),
  ]
}
```

Then the `dist/index.html` will contain:

```html
<head>
  ...
  <link rel="preconnect" href="http://api1.example.com">
  <link rel="dns-prefetch" href="https://api2.example.com">
</head>
```
